import{i as l,I as n}from"./app-BFXy5JVw.js";import{m as p}from"./makeAxiosFactory-B9aoRd9L.js";const s="/bot-api/exports",u=l("exports",{state:()=>({loading:!1,error:null,successMessage:null,exportData:null}),actions:{async exportBirthdaysList(){return this._exportHelper(`${s}/birthdays`,"Дни рождения выгружены")},async exportAgents(){return this._exportHelper(`${s}/agents`,"Младшие администраторы выгружены")},async exportAdmins(){return this._exportHelper(`${s}/admins`,"Администраторы выгружены")},async exportUsers(){return this._exportHelper(`${s}/users`,"Пользователи выгружены")},async exportProducts(r=0){return this._exportHelper(`${s}/products?type=${r}`,"Продукты выгружены")},async exportFull(r){var a,i;const t=n();let o=`${s}/full`;t.show("Процесс генерации отчета запущен"),this.loading=!0,this.error=null;try{const{data:e}=await p(o,"POST",r);return this.successMessage="Отчет сформирован",this.exportData=e,t.show(this.successMessage,"success"),e}catch(e){throw this.error=((i=(a=e.response)==null?void 0:a.data)==null?void 0:i.message)??"Ошибка выгрузки",t.show(this.error,"error"),e}finally{this.loading=!1}},async exportCategories(){return this._exportHelper(`${s}/categories`,"Категории продуктов выгружены")},async exportClients(){return this._exportHelper(`${s}/clients`,"Покупатели выгружены")},async exportSuppliers(){return this._exportHelper(`${s}/suppliers`,"Поставщики выгружены")},async exportSalesHistory(){return this._exportHelper(`${s}/sales-history`,"История продаж выгружена")},async _exportHelper(r,t){var a,i;const o=n();o.show("Процесс генерации отчета запущен"),this.loading=!0,this.error=null;try{const{data:e}=await p(r,"GET");return this.successMessage=t,this.exportData=e,o.show(this.successMessage,"success"),e}catch(e){throw this.error=((i=(a=e.response)==null?void 0:a.data)==null?void 0:i.message)??"Ошибка выгрузки",o.show(this.error,"error"),e}finally{this.loading=!1}}}});export{u};
