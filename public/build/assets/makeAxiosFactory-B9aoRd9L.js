import{I as u,L as t}from"./app-BFXy5JVw.js";async function p(a,w="GET",r=null,n=null){var i,l;if(!navigator.onLine)return u().show("Вы не в сети!"),Promise.reject("Вы не в сети!");const c=((i=window.Telegram)==null?void 0:i.WebApp.initData)||null;t.defaults.headers.common["X-TG-DATA"]=c?btoa(c):null;const s=u();try{let e,o=!1;switch(w.toUpperCase()){case"POST":e=await t.post(a,r,n||void 0);break;case"PUT":o=!0,e=await t.put(a,r);break;case"DELETE":o=!0,e=await t.delete(a);break;case"GET":default:e=await t.get(a,n||void 0);break}return o&&s.show("Операция выполнена успешно","success"),e}catch(e){return((l=e==null?void 0:e.response)==null?void 0:l.status)===419?(s.show("Сессия истекла, страница будет перезагружена","warning"),window.location.reload(),Promise.reject("Сессия истекла")):(s.show(`Ошибка: ${(e==null?void 0:e.message)||"Неизвестная ошибка"}`),Promise.reject(e))}}export{p as m};
